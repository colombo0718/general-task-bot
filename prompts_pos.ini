[extractors]
identify_needs =
    嚴格限制：只輸出最終答案，不得輸出任何解釋、前綴或後綴。
    嚴禁輸出方括號[]、引號、標點符號、空白或換行。
    只允許以下十九選一（區分大小寫）：
    generateQuote / queryPoints / adjustPoints / querySmsPoints / adjustSmsPoints / queryCredentials / companyName / RegionCustomers / getIntransit / setIntransit / restoreTestDB / rebuildInventory / addDevice / addBranch / exportOffShelf / addCustomer / detachCustomer / null
    【輸出格式（必須完全匹配其一）】^(?:generateQuote|queryPoints|adjustPoints|querySmsPoints|adjustSmsPoints|queryCredentials|companyName|RegionCustomers|getIntransit|setIntransit|restoreTestDB|rebuildInventory|addDevice|addBranch|exportOffShelf|addCustomer|detachCustomer|null)$

    任務：判斷用戶需求
    1) 若訊息只有提到「報價單」或「請款單」或「帳單」，並指明公司名稱，但除此之外沒有其他資訊 → generateQuote
    2) 若明確要求報價/估價/出單（含「報價單/請款單/帳單」），並且還提供其他條件（如月數、價格、稅別等）→ generateQuote
    3) 若詢問某公司的「點數」「幾點」 → queryPoints
    4) 若詢問某公司的「簡訊點數」「簡訊餘額」「SMS 點數」 → querySmsPoints
    5) 若訊息包含「加 n 點」「減 n 點」「多 n 點」「少 n 點」，且提及公司名稱 → adjustPoints
    6) 若訊息包含「加 n 元」「減 n 元」「多 n 元」「少 n 元」「加簡訊 n 元」「加簡訊點數 n 元」等，且提及公司名稱 → adjustSmsPoints
    7) 若詢問某公司的「帳號、密碼」或「帳密」 → queryCredentials
    8) 若詢問「X 的公司名稱 / 公司名 / 公司的名字 / 公司叫什麼」 → companyName
    9) 若詢問「某地區有哪些客戶」「台中的客戶有哪些」「高雄有哪些公司」等 → RegionCustomers
    10) 若詢問「X 的在途庫存功能有沒有開 / 有沒有啟用 / 狀態如何」 → getIntransit
    11) 若要求「幫我把 X 的在途庫存 打開/關閉/設成 1/0」等 → setIntransit
    12) 若要求「還原 X 的資料庫 / 測試資料庫」或包含「回復到昨天」「回到某時間點」等字眼 → restoreTestDB
    13) 若要求「重整庫存 / 即時庫存重整 / 重新計算庫存」 → rebuildInventory
    14) 若要求「新增行動裝置 / 登錄手機 / 新增設備 / 新增 UID / 新增 IMEI」等 → addDevice
    15) 若要求「開新分店 / 新增分店 / 幫 X 開分店 / 增設新店 / 開店」等 → addBranch
    16) 若要求「匯出下架資料 / 匯出銷退明細 / 下架報表 / 退貨報表 / 匯出 X 的下架」等 → exportOffShelf
    17) 若要求「新增客戶 / 建立新公司 / 設定新客戶帳密 / 新增 DBName」等 → addCustomer
    18) 若要求「下架 X」「把 X 客戶下架」「停用 X」「停止服務 X」「終止 X 的帳號」等 → detachCustomer
    19) 皆非或無法判斷 → null


identify_name =
    嚴格限制：只輸出最終答案，不得輸出任何解釋、前綴或後綴。
    嚴禁輸出方括號[]、引號、標點符號、空白或換行。
    【輸出格式】^(?:[\u4e00-\u9fffA-Za-z0-9]{2,7})$

    任務：擷取最像「客戶名稱」的單一詞（2~7字），以兩個字居多
        會這樣問就代表一定有，必須要從訊息中提取出名稱
    規則：
    - 優先取出現在「報價單/估價單/請款單/帳單/報價/估價」之前且最近的名詞片段
    - 排除功能詞與雜訊（如：幫我、請、開、做、出、一下、的、給、和、跟、我們、他們）
    - 排除功能詞與雜訊（如：公司、點數、幾點、帳密、帳號）
    - 關鍵字本身（報價單、請款單、帳單等）不是名稱的一部分

include_tax =
    嚴格限制：只輸出最終答案，不得輸出任何解釋、前綴或後綴。
    嚴禁輸出方括號[]、引號、標點符號、空白或換行。
    只允許：Y / N / null
    【輸出格式】^(?:Y|N|null)$

    任務：判斷報價是否含5%營業稅
    - 出現：含稅/稅內/含5%/含稅價/含稅金額/含稅報價 → Y
    - 出現：未稅/不含稅/稅外/外加5%/另加5%/未稅價/淨價 → N
    - 同時出現矛盾時，以「外加/另加/不含」類優先 → N
    - 未提及 → null

get_charge_months =
    嚴格限制：只輸出最終答案，不得輸出任何解釋、前綴或後綴。
    嚴禁輸出方括號[]、引號、單位詞、標點符號、空白或換行。
    找不到則輸出：null
    【輸出格式】^(?:[1-9][0-9]*|null)$

    任務：擷取「收費的月份數（持續期數）」並換算為阿拉伯整數
    規則：
    - 觸發：x個月 / x月 / 收x期 / x季 / x年；半年=6、全年/一年/一年份=12
    - 換算：1期=1月；1季=3月；1年=12月；中文數字需轉阿拉伯
    - 嚴格排除「月份-of-year」（如：7月/July）——那屬於起算月份，不計入此欄
    - 多個候選時，取與「收/收費/續/期/費/計/算/開單」語意最近者
    - 無法判斷 → null

get_start_month =
    嚴格限制：只輸出最終答案，不得輸出任何解釋、前綴或後綴。
    嚴禁輸出方括號[]、引號、漢字「月」字、任何單位詞、標點符號、空白或換行。
    找不到則輸出：null
    只允許：1~12 的整數（不補零），或 null
    【輸出格式】^(?:[1-9]|1[0-2]|null)$

    任務：擷取「起算月份（月份-of-year）」的月份數字（1~12），不含年份。
    規則：
    - 句中若出現年份（西元/民國），一律忽略年份，只決定月份；無法唯一判斷則輸出 null。
    - 月份線索：數字+「月/月份」（例：7月/七月份）、中文數字（七月→7）、英文月份（Jan..Dec → 1..12）、季別（Q1→1、Q2→4、Q3→7、Q4→10）。
    - 起算語意就近：與「從/自/起/開始/起算/由…起/自…起」最近者優先。
    - 嚴格排除「持續單位」：數字後接「個月/期/季/年/半年/一年份」者不視為起算月份。
    - 若同句多候選，選擇與起算詞最近且不含持續單位者；仍模糊則輸出 null。

get_delta_point =
    嚴格限制：只輸出最終答案，不得有多餘字元、前後綴或自然語言。
    只允許輸出整數（可為正數或負數），或 0。
    【輸出格式】^-?\d+$

    任務：從訊息中擷取使用者想要加減的點數。
    規則：
    - 若訊息明確表示「加 X 點」、「多 X 點」→ 輸出正整數 X。
    - 若訊息明確表示「減 X 點」、「扣 X 點」、「少 X 點」→ 輸出負整數 -X。
    - 若訊息中沒有清楚的加減點數 → 輸出 0。

get_delta_amount =
    嚴格限制：只輸出最終答案，不得有多餘字元、前後綴或自然語言。
    只允許輸出整數（可為正數或負數），或 0。
    【輸出格式】^-?\d+$

    任務：從訊息中擷取使用者想要加減的「點數」或「金額」。
    規則：
    - 若訊息明確表示「加 X 點」、「加 X 元」、「多 X 點」、「多 X 元」→ 輸出正整數 X。
    - 若訊息明確表示「減 X 點」、「減 X 元」、「扣 X 點」、「扣 X 元」、「少 X 點」、「少 X 元」→ 輸出負整數 -X。
    - 若訊息中僅有數字但未說明加減方向，預設視為正數。
    - 若訊息中沒有明確數字或加減語意 → 輸出 0。

get_region =
    嚴格限制：只輸出最終答案，不得輸出任何解釋、標點或空白。
    僅輸出對應「台灣市話區碼（去掉開頭的 0）」的數字字串。
    市話區碼對照表：
    台北=2；桃園=3；新竹=3；宜蘭=3；苗栗=37；
    台中=4；彰化=4；南投=49；
    雲林=5；嘉義=5；台南=6；
    高雄=7；屏東=8；
    台東=89；金門=82；澎湖=6。
    若未出現地區詞或無法判斷 → 0。

get_boolean_switch =
    嚴格限制：只輸出最終答案，不得輸出任何解釋、標點符號、空白或自然語言。
    僅允許輸出 0 或 1。
    【輸出格式】^(?:0|1)$

    任務：從使用者訊息中判斷是否表示「開啟」或「關閉」某項功能。
    規則：
    - 若訊息包含以下任一關鍵字 → 視為開啟（輸出 1）：
        開、開啟、打開、啟動、啟用、開起、開放、打開功能、turn on、enable、on、開始使用、開在途、開通知
    - 若訊息包含以下任一關鍵字 → 視為關閉（輸出 0）：
        關、關閉、關掉、停用、停掉、禁用、disable、turn off、off、取消、停、結束使用、關功能、關在途、關通知
    - 若同時出現開與關的詞語（矛盾），以「關閉」為主（輸出 0）。
    - 若訊息中沒有出現任何可判斷的關鍵字 → 預設輸出 0。

get_datetime =
    嚴格限制：只輸出完整時間字串，不得包含解釋或其他文字。
    時間格式：yyyy/MM/dd HH:mm:ss（24 小時制）。
    若輸入中為相對時間（如「昨天早上9點」），需轉換為對應的絕對時間。
    若無法判斷，輸出null。

    任務：從訊息中擷取或推算出欲還原的時間點。
    規則：
    - 「昨天」→ 今天往前一天
    - 「前天」→ 今天往前兩天
    - 「早上九點」→ 09:00:00
    - 「晚上十點」→ 22:00:00
    - 若僅有日期（如「9月20日」），預設時間為 00:00:00
    - 若僅有時間（如「早上九點」），預設日期為今天

get_employee_id =
    嚴格限制：只允許輸出整數（員工編號），不得包含空白、文字、標點或其他字元。
    【輸出格式（必須完全匹配）】^\d+$
    若未偵測到明確的員工編號，請輸出null，不得輸出零、N/A 或任何非數字符號(null除外)。

    任務：從使用者訊息中擷取員工編號。
    請精確依據下列規則：
    1) 若訊息中明確包含「編號 X」「員工編號 X」「員工代號 X」「代號 X」「員工ID X」等片語，輸出該 X。
    2) 若同時出現多組數字，僅擷取最貼近上述關鍵詞的一組。
    3) 若只出現價格、日期或電話號碼等與人員無關的數字，視為無效，輸出null。
    4) 若訊息僅提及「王小明」等人名、無編號，輸出null。
    5) 嚴禁輸出自然語言解釋、標點、單位（如「號」「ID」）或前後空格。

    範例：
    - 「幫我新增員工代號1001」→ 1001
    - 「員工編號是 88」→ 88
    - 「請幫我新增員工1001」→ 1001
    - 「幫我加200元」→ null
    - 「日期是2024」→ null

get_employee_name =
    嚴格限制：只輸出一段中文姓名，僅能包含 2 至 4 個連續中文字。
    不得包含標點、空白、數字、英文字母或任何其他符號。
    【輸出格式（必須完全匹配）】^[\u4e00-\u9fa5]{2,4}$
    若無法確定姓名或出現模糊字詞（例如「我」「他」「店長」「收銀員」等），請輸出null。

    任務：從使用者訊息中擷取員工中文姓名。
    規則：
    1) 若訊息中包含「員工」「同仁」「名字」「姓名」「叫」等關鍵字，且其後緊接 2~4 個中文字，輸出該姓名。
    2) 若句中僅有「他」「我」「我們」「這位」「店長」「收銀員」等非姓名稱呼，視為無效，輸出null。
    3) 若同時出現多組姓名，以最靠近上述關鍵詞者為準。
    4) 若姓名後出現括號或職稱（如「王小明(店長)」），僅擷取前段「王小明」。
    5) 嚴禁輸出任何自然語言、前後空格或附註內容。

    範例：
    - 「員工王小明要新增裝置」→ 王小明
    - 「新增員工姓名張偉」→ 張偉
    - 「幫我登錄店長」→ null
    - 「我想幫李美玉新增行動裝置」→ 李美玉
    - 「請幫我新增王小明(店長)」→ 王小明


get_shop_name =
    嚴格限制：只輸出最終答案，不得包含標點、空白或任何附加字元。
    只允許輸出中文或英數組成的單一店名，或回傳 null。
    【輸出格式（必須完全匹配其一）】^(?:[\u4e00-\u9fa5a-zA-Z0-9]{1,20}|null)$

    任務：從使用者訊息中擷取欲新增的分店名稱。
    若無法明確判斷或內容模糊，請輸出 null。
    
    規則：
    1) 若訊息中包含「開新分店」「新增分店」「開店」「增設新店」「開一家店」等字樣，
       且其後緊接明確名稱（如「曼硃砂華店」「北區店」「二店」「新竹店」），擷取該名稱。
    2) 若句中出現「店名」「名稱」「叫」等關鍵詞，且其後為具體店名，擷取該名稱。
    3) 若同時出現多個候選名稱，以最貼近上述關鍵詞的一組為準。
    4) 若僅提到模糊詞（如「分店」「新店」「開一家店」）但無具體名稱，輸出 null。
    5) 嚴禁輸出標點符號、引號、自然語言或空白。

    範例：
    - 「POSV3測試用開新分店店名曼硃砂華店」 → 曼硃砂華店
    - 「幫我在以西新增分店二店」 → 二店
    - 「POSV3測試用開新店北區店」 → 北區店
    - 「台釱要開新分店，店名是南門店」 → 南門店
    - 「幫我在以西開一間店」 → null
    - 「POSV3測試用開新分店」 → null


get_branch_code =
    嚴格限制：只輸出最終答案，不得有解釋或多餘字元。
    只允許輸出整數（分店編號），或輸出 null。
    【輸出格式（必須完全匹配其一）】^(?:\d+|null)$

    任務：從訊息中擷取「分店編號」。
    規則：
    1) 若出現「分店編號 X」「分店 X」「店號 X」「分店代號 X」等明確片語，輸出 X（整數）。
    2) 若出現與分店無關的數字（價格、日期、電話等）或語意不明確，輸出 null。
    3) 若同時出現多組分店編號，選擇最貼近上述關鍵詞的一組。
    4) 嚴禁輸出空白、單位字或自然語言。

    範例：
    - 「只要分店編號 3 的下架資料」→ 3
    - 「幫我匯出以西下架，分店 12」→ 12
    - 「匯出建高兩年前到現在的下架」→ null

get_start_date =
    嚴格限制：只輸出單一日期字串（YYYY-MM-DD），或輸出 null。
    不得輸出任何解釋、前後綴、單位或空白。
    【輸出格式（必須完全匹配其一）】^(?:\d{4}-\d{2}-\d{2}|null)$

    任務：擷取「起始時間」或「開始日期」。
    規則：
    1) 若句子中出現「從…開始」、「自…以來」、「起」、「從兩年前」、「2023/01/01 起」等語氣，擷取該日期並轉為 YYYY-MM-DD 格式。
    2) 若描述相對時間（例如「兩年前」、「去年」、「上個月一號」），換算為實際日期（以今日為基準）。
    3) 若訊息同時包含多個日期，選擇最貼近「從」、「起」、「開始」語義的那一個。
    4) 若無法確定起始日期 → 輸出 null。

    範例：
    - 「輸出建高從兩年前開始的下架資料」→ （兩年前的今天）
    - 「匯出以西從2023/01/01起的下架資料」→ 2023-01-01
    - 「幫我匯出上個月一號到現在的下架資料」→ （上個月一號）

get_end_date =
    嚴格限制：只輸出單一日期字串（YYYY-MM-DD），或輸出 null。
    不得輸出任何解釋、前後綴、單位或空白。
    【輸出格式（必須完全匹配其一）】^(?:\d{4}-\d{2}-\d{2}|null)$

    任務：擷取「結束時間」或「截止日期」。
    規則：
    1) 若句子中出現「到…為止」、「截止到…」、「到昨天」、「到今天」、「到上週五」等語氣，擷取該日期並轉為 YYYY-MM-DD 格式。
    2) 若描述相對時間（例如「昨天」、「前天」、「上週日」），換算為實際日期（以今日為基準）。
    3) 若訊息同時包含多個日期，選擇最貼近「到」、「截至」、「結束」語義的那一個。
    4) 若無法確定結束日期 → 輸出 null。

    範例：
    - 「輸出建高從去年一月到昨天的下架資料」→ 2025-10-19
    - 「幫我匯出以西2023/01/01到2023/12/31的下架資料」→ 2023-12-31
    - 「匯出兩年前到現在的下架資料」→ （今天的日期）


get_db_name =
    嚴格限制：只輸出單一資料庫名稱（DBName），或輸出 null。
    僅允許英文字母、數字與底線，長度 1–32。
    【輸出格式（必須完全匹配其一）】^(?:[A-Za-z0-9_]{1,32}|null)$

    任務：直接從使用者訊息中「精準擷取」DBName；不得推測、不得轉換中文公司名為代碼。
    規則：
    1) 參考關鍵詞：「DBName」「資料庫名」「庫名」「公司代碼」「代號」「DB」等；擷取其後緊接的英數底線字串。
    2) 若同一句同時出現多個候選，選擇最貼近上述關鍵詞的一個。
    3) 若訊息只有中文公司名（如「以西」「建高」）而未提供英數代碼，輸出 null。
    4) 嚴禁輸出空白、標點、引號或任何解釋文字；不得自動大小寫轉換，依原字面輸出。

    範例：
    - 「DBName 是 test」→ test
    - 「新增客戶，資料庫名 new_client」→ new_client
    - 「我要新增建高這個客戶」→ null

get_account =
    嚴格限制：只輸出單一登入帳號，或輸出 null。
    僅允許英文字母、數字、底線、半形點、半形連字號，長度 3–32。
    【輸出格式（必須完全匹配其一）】^(?:[A-Za-z0-9._-]{3,32}|null)$

    任務：直接從使用者訊息中擷取帳號字串（原樣輸出）；不得創造或推測。
    規則：
    1) 參考關鍵詞：「帳號」「登入帳號」「account」「username」「使用者」等；擷取其後的帳號字串。
    2) 若同句有多個候選，取最貼近關鍵詞者；若同時有帳號與密碼，僅取帳號。
    3) 若未明確提供符合格式之帳號，輸出 null。
    4) 嚴禁輸出空白、標點、引號或任何解釋文字；不得包含 @。

    範例：
    - 「帳號：seiya 密碼：1234」→ seiya
    - 「新增客戶，account=new_user-01」→ new_user-01
    - 「請用我的公司帳號」→ null

get_password =
    嚴格限制：只輸出密碼本體，或輸出 null。
    允許任意非空白字元，長度 4–64；不得包含空白。
    【輸出格式（必須完全匹配其一）】^(?:\S{4,64}|null)$

    任務：直接從使用者訊息中擷取明碼密碼（依現行系統規格）；不得雜註或額外符號。
    規則：
    1) 參考關鍵詞：「密碼」「password」「pwd」等；擷取其後的第一段連續非空白字元。
    2) 若同句同時包含帳號與密碼，僅取與「密碼」關鍵詞最近的那一段。
    3) 若提供之字串包含引號或標點，輸出時移除包覆引號與尾隨標點。
    4) 若未提供明確密碼，輸出 null。
    5) 嚴禁輸出任何解釋文字或遮罩字元（例如 ****）。

    範例：
    - 「帳號 seiya，密碼 1234」→ 1234
    - 「password=Qwe-0909!」→ Qwe-0909!
    - 「密碼改一下」→ null
